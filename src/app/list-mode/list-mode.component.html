<section class="home__container">
  <!--   <div class="right-float-icon">
    <button (click)="toggleLocationModal()">
      <img src="assets/img/location-sign.svg" width="30" height="30" />
    </button>
  </div>

  <div class="left-float-icon">
    <button (click)="goToSearcher()">
      <img src="assets/img/back-arrow-icon.svg" width="30" height="30" />
    </button>
  </div> -->

  <div style="padding-top: 80px">
    <mat-chip> Funcionalidad BETA </mat-chip>
  </div>

  <section class="list" *ngIf="productsList.length > 0">
    <!--     <div class="card">
      <ul>
        <li (click)="deleteItem(item)" *ngFor="let item of productsList">{{ item.nombre }}</li>
      </ul>
    </div>
 -->

    <div class="card-products">
      <div *ngFor="let product of productsList">
        <div class="card-product">
          <div class="card-image">
            <img
              (error)="errorHandler($event)"
              [src]="'https://imagenes.preciosclaros.gob.ar/productos/' + product.id + '.jpg'"
            />
          </div>
          <div class="card__name">
            {{ product.nombre }}
            <div class="card__presentation">
              Presentacion: <span class="card__size">{{ product.presentacion }}</span>
            </div>
          </div>
          <div class="card__buttons">
            <button mat-fab class="card__buttons-delete" (click)="deleteItem(product)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>



      </div>
    </div>

    <button (click)="searchPrices()" *ngIf="productsList.length > 0">¿Donde compro?</button>
  </section>

  <section class="list">
    <div class="card">
      <div *ngFor="let option of results">
        <article class="item" *ngIf="option.totalPrice">
          <strong> Gastarias: ${{ option.totalPrice | number : '1.2-2' }}</strong>
          <br />
          En: {{ option.sucursal.banderaDescripcion }} de {{ option.sucursal.direccion }}
        </article>
      </div>

      <div class="card__empty" *ngIf="(!results || results.length == 0) && !loading">
        <h1 *ngIf="productsList.length != 0">¡Comienza la busqueda!</h1>
        <p *ngIf="productsList.length !== 0">Pulsa el botón para buscar el supermercado mas barato para tu compra</p>

        <h1 *ngIf="productsList.length == 0">Carrito vacío</h1>
        <p *ngIf="productsList.length == 0">Parece que no agregaste ningun producto aún</p>
        <button (click)="goToSearcher()" class="card__button-go" mat-fab extended>Ir al buscador</button>
      </div>

      <div class="card__error" *ngIf="apiError && results.length == 0 && !loading">
        <p>Parece que el servicio de precios no esta disponible o no hay algun producto.</p>

        <p>Vuelve a intentar mas tarde</p>
      </div>

      <div class="card__loader">
        <section class="loader-container" *ngIf="loading">
          <ngx-skeleton-loader
            appearance="line"
            animation="pulse"
            [theme]="{ height: '50px', width: '100%' }"
          ></ngx-skeleton-loader>

          <ngx-skeleton-loader
            appearance="line"
            animation="pulse"
            [theme]="{ height: '50px', width: '100%' }"
          ></ngx-skeleton-loader>

          <ngx-skeleton-loader
            appearance="line"
            animation="pulse"
            [theme]="{ height: '50px', width: '100%' }"
          ></ngx-skeleton-loader>

          <ngx-skeleton-loader
            appearance="line"
            animation="pulse"
            [theme]="{ height: '50px', width: '100%' }"
          ></ngx-skeleton-loader>

          <ngx-skeleton-loader
            appearance="line"
            animation="pulse"
            [theme]="{ height: '50px', width: '100%' }"
          ></ngx-skeleton-loader>
        </section>
      </div>
    </div>
  </section>

  <app-modal-location *ngIf="showLocationModal" (closeModal)="toggleLocationModal()"></app-modal-location>
</section>
